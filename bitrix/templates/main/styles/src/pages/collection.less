/**
 * "collection" page styles
 *
 * @author Viacheslav Lotsmanov
 */

html.collection_page body {
	.collection_page_headline { // {{{1
		.resetCSS;
		.fontMetrics(0, 0);
		margin-top: @headerHeight + 42px;
		min-width: @minWidth;
		max-width: @maxWidth - ((@mainMargin2 - @mainMargin) * 2);
		padding: 0 @mainMargin;
		margin-left: auto;
		margin-right: auto;
		.box-sizing(border-box);
		.relative;

		h1 {
			.resetCSS;
			max-width: none;
		}

		a.about_brand {
			@s: 57px;

			.linkNoLine;
			display: block;
			.absolute((-78px + 69px), @mainMargin);
			.size(auto, @s);
			white-space: nowrap;
			vertical-align: middle;

			& > img {
				display: inline-block;
				.size(@s);
				.border-radius(@s / 2);
				vertical-align: middle;
			}

			& > span {
				display: inline-block;
				text-transform: uppercase;
				white-space: nowrap;
				.sansSerifFont('Roboto-Light', 24px);
				vertical-align: middle;
				margin-left: 10px;
				color: @contentColor;
				border-bottom: 1px solid @linkColorUnderline;
				.transit(~'color, border-bottom-color');
			}

			&:hover > span {
				color: @activeLinkColor;
				border-bottom-color: @activeLinkColorUnderline;
			}
		}
	} // .collection_page_headline }}}1

	main {
		@topMin: 75px;

		ul.collection_list { // {{{1
			.resetCSS;
			min-width: @minWidth;
			max-width: @maxWidth - ((@mainMargin2 - @mainMargin) * 2);
			padding: 0 @mainMargin;
			.box-sizing(border-box);
			margin: 0 auto;
			.fontMetrics(0, 0);

			@min: 208px;

			&>li {
				.resetCSS;
				.size(33%, @min);
				display: inline-block;
				text-align: center;
				margin-top: @topMin;

				&:before, &:after { display: none; }
			} // &>li

			&.brand, &.rings { // {{{2
				.preview {
					.linkNoLine;
					.fontMetrics(0, 0);
					display: block;
					.relative;
					.size(@min);
					margin: 0 auto;

					img {
						display: inline-block;
						.size(100%, auto);
						.absolute(0, auto, auto, 0);
						z-index: 1;
						.opacity(1);
						.transit(~'opacity');
					}

					img.blur {
						z-index: 3;
						.opacity(0);
					}
				}

				span.preview { cursor: default; }
			} // &.brand, &.rings }}}2

			&.brand.popup>li .preview img {
				&.blur { .opacity(1); }
			}

			&.brand>li .info { // {{{2
				@w: 720px;

				display: block;
				.size(@w, auto);
				.box-sizing(border-box);
				background: white;
				border: 1px solid @popupBorderColor;
				z-index: 10;
				vertical-align: bottom;
				text-align: left;
				padding-top: @mainMargin;
				padding-bottom: @mainMargin;
				.absolute(auto, auto, auto, 50%);
				margin-left: -(@w/2);

				.text {
					display: inline-block;
					.size(320px - (@mainMargin * 2), auto);
					margin-left: @mainMargin;
					vertical-align: bottom;
					font: @contentFont;
					.fontMetrics(14px, 20px);
				}

				img.picture {
					display: inline-block;
					vertical-align: bottom;
					.size(342px);
				}

				.closer {
					.linkNoLine;
					&, &:before { .sprite(@sprite_icons_closer); }
					&:after { .sprite(@sprite_icons_closer_active); }
					background: none !important;
					display: block;
					.animatedIcon;
					.absolute(20px, 20px);
				}

				.zoom {
					.linkNoLine;
					&, &:before { .sprite(@sprite_icons_lens); }
					&:after { .sprite(@sprite_icons_lens_active); }
					background: none !important;
					display: block;
					.animatedIcon;
					.absolute(auto, 20px, 20px);
				}

				display: none;
				.transit(~'opacity');
			} // &.brand>li .info }}}2

			&.rings { // {{{2
				.relative;

				&>li {
					@min: 170px;
					height: @min;
					.relative;

					.preview {
						display: block;
						.size(@min);
						.relative(50%);
						.transform(translateY(-50%));

						img {
							display: block;
							.relative(50%);
							.transform(translateY(-50%));
						}
					}

					.info {
						display: block;
						background: rgba(237, 230, 228, 0.9);
						.absolute(0, auto, auto, 0);
						.size(100%);
						z-index: 2;

						.text {
							font: @contentFont;
							.fontMetrics(13px, 20px);
							.absolute(13px, auto, auto, 16px);
							text-align: left;
							z-index: 1;
						}

						.zoom {
							.linkNoLine;
							display: block;
							.absolute(auto, auto, 0, 0);
							.size(100%, 49px);
							background: #c5b8b4;
							z-index: 2;

							&>span {
								.sprite(@sprite_icons_lens2);
								display: block;
								.absolute(50%, auto, auto, 50%);
								margin-left: -(@sprite_icons_lens2-width / 2);
								margin-top: -(@sprite_icons_lens2-height / 2);
								overflow: hidden;
								white-space: nowrap;
								text-indent: 50000px;
							}
						} // .zoom

						.opacity(0);
						.transit(~'opacity');

						&:hover {
							.opacity(1);
						}
					} // .info

					a.preview:hover + .info {
						.opacity(1);
					}
				} // &>li
			} // &.rings }}}2

			&.produce { // {{{2
				margin-top: 42px - 9px;

				@topMin: 54px; // max 90
				@min: 232px; // max 339
				@minText: 277px; // max 460
				@minFontS: 22px; // max 31

				&>li {
					vertical-align: top;
					height: auto;
					text-align: center;
					margin-top: @topMin;

					&>a {
						.linkNoLine;
						display: inline-block;
						text-align: center;
						vertical-align: top;
						width: @minText;
						.relative;
						overflow: hidden;

						&>span:first-child { // pic
							display: block;
							.size(@min);
							margin: 0 auto;
							.relative;
							margin-top: 10px;
							z-index: 0;

							&>img {
								display: block;
								.size(100%, auto);
								.relative(50%);
								.transform(translateY(-50%));
							}
						} // pic

						&>span:first-child + span { // text
							display: block;
							margin: 0 auto;
							font: @contentFont;
							.sansSerifFont('Roboto-Light', @minFontS, (@minFontS + 2px));
							text-transform: uppercase;
							margin-top: 10px;
							margin-bottom: 10px;
							width: @minText;
							z-index: 2;
							.relative;
							color: @contentColor;

							&:before {
								.pseudoBlock;
								.size(40000px, 40000px);
								.absolute(-1000px, auto, auto, -1000px);
								background: rgba(237, 230, 228, 0.5);
								z-index: -1;
								.opacity(0);
								.transit(~'opacity');
							}
						} // text

						&:hover {
							&>span:first-child + span {
								color: @contentColor;
								&:before { .opacity(1); }
							}
						}
					} // &>a
				} // &>li
			} // &.produce }}}2
		} // ul.collection_list }}}1

		a.load_more {
			.circleDownArrowButtonLight();
			display: block;
			margin: 0 auto;
		}

		ul.collection_list + a.load_more {
			margin-top: @topMin;
		}
	} // main
} // html.collection_page body
