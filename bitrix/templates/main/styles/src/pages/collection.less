/**
 * "collection" pages styles
 *
 * @author Viacheslav Lotsmanov
 * @license GNU/AGPLv3
 * @see {@link https://github.com/web-izmerenie/jhdanaya/blob/master/LICENSE-AGPLv3|License}
 */

html.collection_page body {
	.imgBrandLink() { // {{{1
		@s: 57px;

		.linkNoLine;
		display: inline-block;
		.size(auto, @s);
		white-space: nowrap;
		vertical-align: middle;
		.relative;

		& > img {
			display: inline-block;
			.size(@s);
			.border-radius(@s / 2);
			vertical-align: middle;
		}

		& > span {
			display: inline-block;
			text-transform: uppercase;
			white-space: nowrap;
			.sansSerifFont('Roboto-Light', 24px);
			vertical-align: middle;
			margin-left: 10px;
			color: @contentColor;
			border-bottom: 1px solid @linkColorUnderline;
			.transit(~'color, border-bottom-color');
		}

		&:hover > span {
			color: @activeLinkColor;
			border-bottom-color: @activeLinkColorUnderline;
		}
	} // .imgBrandLink() }}}1

	.collection_brand_page_headline { // {{{1
		.resetCSS;
		.fontMetrics(0, 0);
		margin-top: @headerHeight + 42px;
		min-width: @minWidth;
		max-width: @maxWidth - ((@mainMargin2 - @mainMargin) * 2);
		padding: 0 @mainMargin;
		margin-left: auto;
		margin-right: auto;
		.box-sizing(border-box);
		.relative;

		h1 {
			.resetCSS;
			min-width: 0;
			max-width: none;
			padding-right: 260px;
			.sansSerifFont('Roboto-Thin', 52px);

			&>img { margin-bottom: -(73px - 62px); }
		}

		a.about_brand {
			.imgBrandLink();
			.absolute((-78px + 69px), @mainMargin);
		}
	} // .collection_brand_page_headline }}}1

	main { // {{{1
		@topMin: 75px;

		ul.collection_list { // {{{2
			.resetCSS;
			min-width: @minWidth;
			max-width: @maxWidth - ((@mainMargin2 - @mainMargin) * 2);
			padding: 0 @mainMargin;
			.box-sizing(border-box);
			margin: 0 auto;
			.fontMetrics(0, 0);

			@min: 208px;
			@minBrand: @min;

			&>li {
				.resetCSS;
				.size(33%, @min);
				display: inline-block;
				text-align: center;
				margin-top: @topMin;

				&:before, &:after { display: none; }

				.preview img { .transit(~'opacity'); }
			} // &>li

			&.brand, &.rings { // {{{3
				.relative;

				&>li {
					.relative;
					@min: 170px;
					height: @min;
					overflow: hidden;

					.preview {
						.linkNoLine;
						.fontMetrics(0, 0);
						display: block;
						.relative;
						.size(@min);
						margin: 0 auto;
						overflow: auto !important; // for jquery animation

						img {
							display: inline-block;
							.size(100%, auto);
							.absolute(0, auto, auto, 0);
							z-index: 1;
							.opacity(1);
						}

						img.blur {
							z-index: 3;
							.opacity(0);
						}
					}

					.preview {
						display: block;
						.size(@min);
						.relative(50%);
						.transform(translateY(-50%));

						img {
							display: block;
							.absolute(50%);
							.transform(translateY(-50%));
							background-position: center center;
							background-repeat: no-repeat;
							.transit(~'background-size');
						}
					}
				}

				span.preview { cursor: default; }
			} // &.brand, &.rings }}}3

			&.brand>li {
				height: @minBrand;
				.preview { .size(@minBrand); }
			}

			&.rings.popup>li .preview img,
			&.brand.popup>li .preview img {
				& { .opacity(0); }
				&.blur { .opacity(1); }
			}

			&.rings>li .info.detail,
			&.brand>li .info.detail {
				display: none;
			}

			&.rings>li .info.hover, // {{{3
			&.brand>li .info.hover {
				display: block;
				background: rgba(237, 230, 228, 0.9);
				.absolute(0, auto, auto, 0);
				.size(100%);
				z-index: 10;
				cursor: pointer;

				.text {
					font: @contentFont;
					.fontMetrics(13px, 20px);
					.absolute(13px, auto, auto, 16px);
					text-align: left;
					z-index: 1;
				}

				.zoom {
					.linkNoLine;
					display: block;
					.absolute(auto, auto, 0, 0);
					.size(100%, 49px);
					background: #c5b8b4;
					z-index: 2;
					.transit(~'background-color');

					&>span {
						.sprite-width(@sprite-icons-lens2);
						.sprite-height(@sprite-icons-lens2);
						display: block;
						margin-left: -(@sprite-icons-lens2-width / 2);
						margin-top: -(@sprite-icons-lens2-height / 2);
						overflow: hidden;
						white-space: nowrap;
						text-indent: 50000px;

						&:before { .sprite(@sprite-icons-lens2); }
						&:after { .sprite(@sprite-icons-lens2_active); }

						.animatedIcon;

						.absolute(50%, auto, auto, 50%);
					}

					&:hover {
						background: #4b3c38;
						&>span {
							&:before { .opacity(0); }
							&:after { .opacity(1); }
						}
					}
				} // .zoom

				p, p+p { padding: 0; }

				.opacity(0);
				.transit(~'opacity');

				//&:hover { .opacity(1); }
			} // .info.hover }}}3

			&.rings>li a.preview:hover + .info.hover,
			&.brand>li a.preview:hover + .info.hover {
				//.opacity(1);
			}

			&.produce { // {{{3
				margin-top: 42px - 9px;

				@topMin: 54px; // max 90
				@min: 232px; // max 339
				@minText: 277px; // max 460
				@minFontS: 22px; // max 31

				&>li {
					vertical-align: top;
					height: auto;
					text-align: center;
					margin-top: @topMin;

					&>a {
						.linkNoLine;
						display: inline-block;
						text-align: center;
						vertical-align: top;
						width: @minText;
						.relative;
						overflow: hidden;

						&>span:first-child { // pic
							display: block;
							.size(@min);
							margin: 0 auto;
							.relative;
							margin-top: 10px;
							z-index: 0;

							&>img {
								display: block;
								.size(100%, auto);
								.relative(50%);
								.transform(translateY(-50%));
							}
						} // pic

						&>span:first-child + span { // text
							display: block;
							margin: 0 auto;
							font: @contentFont;
							.sansSerifFont('Roboto-Light', @minFontS, (@minFontS + 2px));
							text-transform: uppercase;
							margin-top: 10px;
							margin-bottom: 10px;
							width: @minText;
							z-index: 2;
							.relative;
							color: @contentColor;

							&:before {
								.pseudoBlock;
								.size(40000px, 40000px);
								.absolute(-1000px, auto, auto, -1000px);
								background: rgba(237, 230, 228, 0.5);
								z-index: -1;
								.opacity(0);
								.transit(~'opacity');
							}
						} // text

						&:hover {
							&>span:first-child + span {
								color: @contentColor;
								&:before { .opacity(1); }
							}
						}
					} // &>a
				} // &>li
			} // &.produce }}}3
		} // ul.collection_list }}}2

		a.load_more {
			.circleDownArrowButtonLight();
			display: block;
			margin: 0 auto;
		}

		ul.collection_list + a.load_more {
			margin-top: @topMin;
		}

		ul.produce_submenu { // {{{2
			.resetCSS;
			display: block;
			min-width: @minWidth;
			max-width: 1296px;
			margin: 0 auto;
			border-top: 1px solid #dcd3c9;

			&>li {
				.resetCSS; &:before, &:after { display: none; }
				display: block;
				border-bottom: 1px solid #dcd3c9;
				color: @contentColor;
				.sansSerifFont('Roboto-Thin', 50px);
				text-align: center;
				@p: 103px - 52px;

				&>a {
					.linkNoLine;
					display: block;
					color: @contentColor;
					padding-top: @p / 2;
					padding-bottom: @p / 2;
					text-transform: uppercase;
					.transit(~'color, background-color');

					&:hover {
						color: white;
						background: #c5b8b4;
					}
				}
			} // &>li
		} // ul.produce_submenu }}}2

		ul.collection_list.produce + ul.produce_submenu {
			margin-top: 72px - 15px;
		}

		.about_brand { // {{{2
			display: block;
			padding-top: 52px - 28px;

			// two column blocks {{{3
			section.accent_info_block,
			section.two_column_info {
				display: table;
				width: 100%;

				&>.col_l {
					display: table-cell;
					width: 50%;
					vertical-align: top;
					text-align: right;
				}

				&>.col_r {
					display: table-cell;
					width: 50%;
					vertical-align: middle;

					&>p {
						@pL: 32px;
						padding-left: @pL;
						padding-right: @mainMargin;
						max-width: (@maxWidth/2) - @mainMargin2 + @mainMargin - 125px;
						.box-sizing(border-box);

						&:first-child { padding-top: @mainMargin; }
						&:last-child { padding-bottom: @mainMargin; }
					}
				}
			} // two column blocks }}}3

			& > blockquote { // {{{3
				@picS: 118px;
				@picOffset: 32px - 18px;

				.resetCSS;
				display: block;
				width: 625px;
				.sansSerifFont('Roboto', 17px, 24px);
				margin-left: auto;
				margin-right: auto;
				padding-top: 58px;
				.relative;
				min-height: @picS - @picOffset;

				&>img {
					@s: @picS;
					display: block;
					.size(@s);
					.border-radius(@s / 2);
					float: left;
					margin-right: 27px;
					.relative(-@picOffset);
				}

				p.signature {
					text-align: right;
					font: @contentFont;
					font-weight: bold;
				}
				p + p.signature { padding-top: 24px - 16px; }
			} // & > blockquote }}}3

			// section.accent_info_block {{{3
			* + section.accent_info_block { margin-top: 44px; }
			section.accent_info_block {
				background: #5d6464;
				color: white;

				&>.picture {
					height: 468px;
					background-color: white;
					background-position: 0 middle;
					.background-size(cover);
				}
			} // section.accent_info_block }}}3

			section.info_right_pic { // {{{3
				@picS: 304px;
				@picOffset: 45px - 18px;

				display: block;
				width: 790px;
				margin-left: auto;
				margin-right: auto;
				margin-top: 95px - 18px;
				.relative;
				min-height: @picS - @picOffset;

				&>img {
					@s: @picS;
					float: right;
					.size(@s);
					.border-radius(@s/2);
					margin-left: @mainMargin2;
					.relative(-@picOffset);
				}
			} // section.info_right_pic }}}3

			.figure_split { // {{{3
				display: block;
				height: 18px;
				.bg('rhomb_splitter.png', 0 center repeat-x);
				margin-top: 49px;
				margin-bottom: 49px;
			} // .figure_split }}}3

			section.two_column_info { // {{{3
				&>.col_l .youtube_video {
					display: inline-block;
					.size(467px, 347px);
					.bg('spinner_1.png', center center no-repeat @plugColor);
					.relative;
					overflow: hidden;

					&>iframe { .size(100%); }
				}

				&>.col_r>p {
					&:first-child { padding-top: 0; }
					&:last-child { padding-bottom: 0; }
				}
			} // section.two_column_info }}}3

			// section.notation {{{3
			* + section.notation { padding-top: 113px - 24px; }
			section.notation {
				display: block;
				width: 790px;
				margin-left: auto;
				margin-right: auto;
				text-align: center;
				.sansSerifFont('Roboto', 18px, 24px);
				font-weight: bold;
			} // section.notation }}}3

			ul.production_list { // {{{3
				.resetCSS;
				.fontMetrics(0, 0);
				display: block;
				vertical-align: middle;
				text-align: center;
				padding-top: 49px - 31px;

				&>li {
					.resetCSS; background: none;
					&:before { display: none; }
					display: inline-block;
					vertical-align: middle;
					margin-left: 47px;
					margin-top: @mainMargin;

					&:first-child { margin-left: 0; }
				}
			} // ul.production_list }}}3

			// section.back_link {{{3
			* + section.back_link { padding-top: 73px - 13px; }
			section.back_link {
				display: block;
				.fontMetrics(0,0);
				text-align: center;

				&>a { .imgBrandLink(); }
			} // section.back_link }}}3

			// limited blocks {{{3
			section.based,
			.figure_split,
			ul.production_list {
				.box-sizing(border-box);
				padding-left: @mainMargin;
				padding-right: @mainMargin;
				max-width: @maxWidth - ((@mainMargin2 - @mainMargin) * 2);
				margin-left: auto;
				margin-right: auto;
				.background-clip(content-box);
			} // limited blocks }}}3
		} // .about_brand }}}2
	} // main }}}1

	nav.nav_block + main ul.collection_list.produce { margin-top: 0; }

	&>.info.detail.collection_info_detail { // {{{1
		@w: 720px;

		display: block;
		.size(@w, auto);
		.box-sizing(border-box);
		background: white;
		border: 1px solid @popupBorderColor;
		z-index: 200;
		vertical-align: bottom;
		text-align: left;
		padding-top: @mainMargin;
		padding-bottom: @mainMargin;
		.fixed(50%, auto, auto, 50%);
		margin-left: -(@w/2);
		.transform(translateY(-50%));

		.text {
			display: inline-block;
			.size(320px - (@mainMargin * 2), auto);
			margin-left: @mainMargin;
			vertical-align: bottom;
			font: @contentFont;
			.fontMetrics(14px, 20px);

			p, p+p { padding: 0; }
		}

		img.picture {
			display: inline-block;
			vertical-align: bottom;
			.size(342px);
		}

		.closer {
			.linkNoLine;
			&, &:before { .sprite(@sprite-icons-closer); }
			&:after { .sprite(@sprite-icons-closer_active); }
			background: none !important;
			display: block;
			.animatedIcon;
			.absolute(20px, 20px);
		}

		.zoom {
			.linkNoLine;
			&, &:before { .sprite(@sprite-icons-lens); }
			&:after { .sprite(@sprite-icons-lens_active); }
			background: none !important;
			display: block;
			.animatedIcon;
			.absolute(auto, 20px, 20px);
		}

		display: none;
	} // .info.detail }}}1
} // html.collection_page body

html.collection_page_over_popup { // {{{1
	overflow-y: hidden !important;
	body { overflow-y: hidden !important; }

	body > .collection_page_big_photo_block {
		display: block;
		.size(100%);
		.fixed(0, 0, 0, 0);
		background: white;
		z-index: 200;
		.fontMetrics(0, 0);
		.opacity(0);

		.closer {
			.linkNoLine;
			&, &:before { .sprite(@sprite-icons-closer); }
			&:after { .sprite(@sprite-icons-closer_active); }
			background: none !important;
			display: block;
			.animatedIcon;
			.absolute(20px, 20px);
			z-index: 210;
		}

		.wrap {
			display: block;
			padding: 80px;
			.relative;
			z-index: 205;
			.box-sizing(border-box);
			.size(100%);

			img {
				display: block;
				margin: 0 auto;
				max-width: 100%;
				max-height: 100%;
				.relative(50%);
				.transform(translateY(-50%));
			}
		}
	} // body > .collection_page_big_photo_block
} // html.collection_page_over_popup }}}1
